---
- hosts: new-master
  roles:
    - { role: rainvar, tags: default }
    - { role: bootstrap, tags: bootstrap }
    - { role: prepare, tags: prepare }
    - { role: storage/nfs/client, when: "storage_type == 'nfs'" }
    - { role: storage/nas, when: "storage_type == 'nas'" }
    - { role: storage/gfs, when: "storage_type == 'gfs'" }
    - { role: docker, tags: docker }
    - { role: kube-master, tags: kube-master }
    - { role: etcd, tags: etcd }
    - { role: lb, tags: lb }
    - { role: monitor, tags: monitor }
    - { role: health, tags: health }
    - { role: network_plugin/calico, when: "CLUSTER_NETWORK == 'calico'" }
    - { role: network_plugin/flannel, when: "CLUSTER_NETWORK == 'flannel'" }
    - { role: master, tags: master }
    - { role: node, tags: node }
